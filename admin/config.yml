backend:
  name: github
  repo: mfathy13786/okaz-store
  branch: main
  base_url: https://okaz-auth.m-fathy-13786.workers.dev
  site_domain: okaz-store.pages.dev
  auth_endpoint: api/auth

media_folder: "assets/images"
public_folder: "/assets/images"

collections:
  - name: "store_data"
    label: "إدارة محتوى المتجر"
    delete: false
    editor:
      preview: false
    files:
      - name: "content"
        label: "الأقسام والمنتجات"
        file: "data.json"
        fields:
          # أولاً: قائمة الأقسام
          - name: "categories"
            label: "1. الأقسام (ضيف الأقسام هنا الأول)"
            widget: "list"
            fields:
              - { label: "اسم القسم", name: "title", widget: "string" }
              - { label: "أيقونة", name: "icon", widget: "string", default: "fas fa-star" }
          
          # ثانياً: قائمة المنتجات
          - name: "products"
            label: "2. المنتجات"
            widget: "list"
            fields:
              - { label: "اسم المنتج", name: "title", widget: "string" }
              - { label: "السعر", name: "price", widget: "number" }
              # هنا السحر! هيختار من الأقسام اللي فوق أوتوماتيك
              - { 
                  label: "القسم", 
                  name: "category", 
                  widget: "relation", 
                  collection: "store_data", 
                  file: "content",
                  search_fields: ["categories.*.title"], 
                  display_fields: ["categories.*.title"], 
                  value_field: "categories.*.title" 
                }
              - { label: "الصورة", name: "image", widget: "image" }
              - { 
                  label: "شارة (Badge)", 
                  name: "badge", 
                  widget: "select", 
                  options: ["لا يوجد", "الأكثر طلباً", "V.I.P", "طبي"], 
                  default: "لا يوجد" 
                }
