backend:
  name: github
  repo: mfathy13786/okaz-store
  branch: main
  base_url: https://okaz-auth.m-fathy-13786.workers.dev
  site_domain: okaz-store.pages.dev
  auth_endpoint: api/auth

media_folder: "assets/images"
public_folder: "/assets/images"

collections:
  - name: "store_data"
    label: "إدارة محتوى المتجر"
    delete: false
    editor:
      preview: false
    files:
      - name: "content"
        label: "البيانات (أقسام - منتجات - شحن)"
        file: "data.json"
        fields:
          # --- 1. إعدادات الأقسام ---
          - name: "categories"
            label: "1. الأقسام (صورة واسم)"
            widget: "list"
            summary: "{{title}}"
            fields:
              - { label: "اسم القسم", name: "title", widget: "string" }
              - { label: "صورة القسم الرئيسي", name: "image", widget: "image" }

          # --- 2. إعدادات الشحن والمحافظات ---
          - name: "shipping_rules"
            label: "2. إعدادات المحافظات وأسعار الشحن"
            widget: "list"
            summary: "{{city}} - {{cost}} ج.م"
            fields:
              - { label: "اسم المحافظة", name: "city", widget: "string" }
              - { label: "سعر الشحن (رقم فقط)", name: "cost", widget: "number", default: 0 }

          # --- 3. إعدادات المنتجات ---
          - name: "products"
            label: "3. المنتجات (البضاعة)"
            widget: "list"
            summary: "{{title}} - {{price}} ج.م"
            fields:
              - { label: "اسم المنتج", name: "title", widget: "string" }
              - { label: "السعر (جنيه)", name: "price", widget: "number" }
              - { 
                  label: "القسم", 
                  name: "category", 
                  widget: "relation", 
                  collection: "store_data", 
                  file: "content",
                  search_fields: ["categories.*.title"], 
                  display_fields: ["categories.*.title"], 
                  value_field: "categories.*.title" 
                }
              # ألبوم صور المنتج
              - name: "gallery"
                label: "ألبوم صور المنتج (ارفع صورة أو أكتر)"
                widget: "list"
                fields:
                  - { label: "صورة", name: "image", widget: "image" }
              - { 
                  label: "شارة التميز (Badge)", 
                  name: "badge", 
                  widget: "select", 
                  options: ["لا يوجد", "الأكثر طلباً", "V.I.P", "طبي"], 
                  default: "لا يوجد" 
                }
